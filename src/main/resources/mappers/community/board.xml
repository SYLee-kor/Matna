<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="board">

	<sql id="type">
       <choose>
         <when test="type=='free'.toString()">
           <trim>board_free</trim>
         </when>
       </choose>
   </sql>
   

   <!--  no,title,writer,content,viewcnt,replycnt,regdate -->
   <insert id="create">
      insert into 
      <include refid="type"/>
      (no,title,writer,content)
      values (board_free_seq.nextval, #{title},#{writer},#{content})
   </insert>
   
   <select id="listAll" resultType="board">
      select no,title,writer,content,regdate,viewcnt,replycnt
      from <include refid="type"/>
      order by no desc
   </select>
   
   <select id="read" resultType="board">
      select no,title,content,writer
      from <include refid="type"/>
      where no=#{no}
   </select>
   
   <delete id="delete">
      delete from <include refid="type"/>
      where no=#{no}
   </delete>
   
   <update id="update">
      update <include refid="type"/> set title=#{title} , content=#{content} , writer=#{writer}
      where no=#{no}
   </update>
   
   <update id="updateViewCnt">
   	update <include refid="type"/>
   	set viewcnt = viewcnt + 1
   	where no = #{no}
   </update>
   
</mapper>



